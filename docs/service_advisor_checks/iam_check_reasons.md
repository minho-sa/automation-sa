# IAM 서비스 어드바이저 검사항목 분석

## 개요
IAM 서비스 어드바이저는 AWS Identity and Access Management의 보안 설정을 검사하여 계정 보안을 강화하고 최소 권한 원칙을 준수하도록 지원합니다.

## 검사항목 목록

### 1. 액세스 키 교체 (iam-access-key-rotation)

#### 검사 목적
- **주요 목적**: 장기간 사용된 액세스 키로 인한 보안 위험 최소화
- **보안 원칙**: 자격 증명의 정기적 교체를 통한 유출 위험 감소

#### 심각도 기준: HIGH
**HIGH로 설정한 이유:**
1. **유출 위험 증가**: 오래된 액세스 키는 시간이 지날수록 유출 가능성 증가
2. **광범위한 영향**: 액세스 키 유출 시 AWS 계정 전체 리소스에 무단 접근 가능
3. **탐지 어려움**: 유출된 키의 악용을 즉시 발견하기 어려움
4. **AWS 모범 사례**: AWS 보안 가이드라인에서 90일 교체 권장

#### 검사 기준
- **PASS 조건**: 액세스 키가 없거나 90일 이내에 생성된 키
- **WARNING 조건**: 90일 이상 180일 미만 교체되지 않은 액세스 키
- **FAIL 조건**: 180일 이상 교체되지 않은 액세스 키
- **분석 대상**: 모든 IAM 사용자의 활성 액세스 키 (CreateDate 기준)

#### 권장 개선 방안
1. **정기적 교체**: 90일마다 액세스 키 교체
2. **불필요한 키 삭제**: 사용하지 않는 액세스 키 제거
3. **임시 자격 증명 사용**: IAM 역할과 STS를 통한 임시 자격 증명 활용
4. **자동화**: AWS CLI/SDK를 통한 자동 키 교체 프로세스 구축

---

### 2. 암호 정책 (iam-password-policy)

#### 검사 목적
- **주요 목적**: 강력한 암호 정책을 통한 계정 보안 강화
- **브루트 포스 방어**: 약한 암호로 인한 무차별 대입 공격 방지

#### 심각도 기준: HIGH
**HIGH로 설정한 이유:**
1. **기본 보안 요소**: 암호는 계정 보안의 첫 번째 방어선
2. **공격 빈도**: 암호 기반 공격이 가장 일반적인 침해 방법
3. **연쇄 효과**: 하나의 약한 암호가 전체 시스템 보안을 위협
4. **규제 요구사항**: 대부분의 보안 표준에서 강력한 암호 정책 요구

#### 검사 기준
- **FAIL 조건**:
  - 최소 암호 길이 < 14자
  - 대문자, 소문자, 숫자, 특수문자 요구사항 미설정
  - 암호 만료 미설정 또는 90일 초과
  - 암호 재사용 방지 < 24개

#### 권장 개선 방안
1. **복잡성 요구사항**: 대소문자, 숫자, 특수문자 조합 필수
2. **최소 길이**: 14자 이상 설정
3. **정기 교체**: 90일마다 암호 변경 요구
4. **재사용 방지**: 최근 24개 암호 재사용 금지

---

### 3. MFA 설정 (iam-mfa)

#### 검사 목적
- **주요 목적**: 다중 인증을 통한 계정 보안 강화
- **추가 보안 계층**: 암호 유출 시에도 계정 보호

#### 심각도 기준: HIGH
**HIGH로 설정한 이유:**
1. **관리자 계정 보호**: 높은 권한을 가진 계정의 필수 보안 조치
2. **자격 증명 도난 대응**: 암호만으로는 부족한 보안 강화
3. **AWS 권장사항**: AWS 보안 모범 사례에서 강력히 권장
4. **규제 준수**: 많은 보안 표준에서 MFA 요구

#### 검사 기준
- **FAIL 조건**: 관리자 권한(AdministratorAccess 정책) 사용자의 MFA 미설정
- **WARNING 조건**: 콘솔 액세스 가능한 일반 사용자의 MFA 미설정
- **PASS 조건**: MFA 설정됨 또는 콘솔 액세스 권한 없음
- **분석 대상**: 모든 IAM 사용자의 MFA 설정 상태, 콘솔 액세스 권한, 관리자 권한 여부

#### 권장 개선 방안
1. **가상 MFA**: 스마트폰 앱을 통한 MFA 설정
2. **하드웨어 MFA**: 물리적 보안 키 사용
3. **U2F 키**: FIDO U2F 표준 보안 키 활용
4. **정책 강제**: IAM 정책을 통한 MFA 필수 설정

---

### 4. 비활성 사용자 검사 (iam-inactive-users)

#### 검사 목적
- **주요 목적**: 사용하지 않는 계정으로 인한 보안 위험 제거
- **공격 표면 축소**: 불필요한 계정을 통한 침입 경로 차단

#### 심각도 기준: MEDIUM
**MEDIUM으로 설정한 이유:**
1. **잠재적 위험**: 즉시 위험하지는 않지만 장기적 보안 위험 존재
2. **관리 부담**: 모니터링되지 않는 계정의 악용 가능성
3. **정리 필요성**: 정기적인 계정 정리를 통한 보안 향상
4. **규모 영향**: 조직 규모가 클수록 비활성 계정 관리의 중요성 증가

#### 검사 기준
- **WARNING 조건**: 90일 이상 활동 없는 사용자
- **FAIL 조건**: 180일 이상 활동 없는 사용자
- **활동 기준**: 콘솔 로그인, 액세스 키 사용 기록

#### 권장 개선 방안
1. **정기적 검토**: 분기별 사용자 계정 감사
2. **자동 비활성화**: 일정 기간 미사용 시 자동 비활성화
3. **퇴사자 관리**: 즉시 계정 삭제 또는 비활성화
4. **액세스 검토**: 정기적인 액세스 권한 재검토

---

### 5. 루트 계정 보안 (iam-root-account)

#### 검사 목적
- **주요 목적**: 최고 권한 계정의 보안 강화
- **최후 방어선**: 루트 계정 침해 시 전체 AWS 계정 위험

#### 심각도 기준: HIGH
**HIGH로 설정한 이유:**
1. **최고 권한**: 루트 계정은 모든 AWS 리소스에 대한 완전한 권한 보유
2. **복구 불가능**: 루트 계정 침해 시 전체 계정 복구가 매우 어려움
3. **AWS 권장사항**: AWS에서 루트 계정 보안을 최우선으로 강조
4. **단일 실패점**: 루트 계정 하나의 침해로 전체 인프라 위험

#### 검사 기준
- **FAIL 조건**:
  - 루트 계정 MFA 미설정
  - 루트 계정 액세스 키 존재
- **분석 대상**: AWS 계정의 루트 사용자

#### 권장 개선 방안
1. **MFA 필수**: 루트 계정에 반드시 MFA 설정
2. **액세스 키 삭제**: 루트 계정의 모든 액세스 키 제거
3. **사용 제한**: 계정 생성 및 특정 관리 작업에만 사용
4. **강력한 암호**: 복잡하고 고유한 암호 사용

---

### 6. 정책 분석 (iam-policy-analyzer)

#### 검사 목적
- **주요 목적**: 과도한 권한을 가진 정책 식별
- **최소 권한 원칙**: 필요한 최소한의 권한만 부여

#### 심각도 기준: HIGH
**HIGH로 설정한 이유:**
1. **권한 남용 위험**: 과도한 권한은 의도하지 않은 리소스 접근 허용
2. **침해 시 피해 확대**: 높은 권한의 계정 침해 시 더 큰 피해
3. **규제 요구사항**: 최소 권한 원칙은 대부분의 보안 표준 요구사항
4. **관리 복잡성**: 복잡한 권한 구조는 보안 취약점 증가

#### 검사 기준
- **FAIL 조건**:
  - AdministratorAccess 정책 사용
  - 모든 리소스(*) 및 모든 작업(*) 허용
- **WARNING 조건**:
  - 와일드카드 리소스 또는 작업 사용

#### 권장 개선 방안
1. **세분화된 권한**: 특정 리소스와 작업에 대한 권한만 부여
2. **정기적 검토**: 분기별 정책 권한 재검토
3. **역할 기반 접근**: 직무에 따른 역할별 권한 관리
4. **Access Analyzer 활용**: AWS IAM Access Analyzer를 통한 권한 분석

---

### 7. 자격 증명 보고서 (iam-credential-report)

#### 검사 목적
- **주요 목적**: 종합적인 자격 증명 보안 상태 분석
- **통합 관리**: 모든 보안 요소의 통합적 검토

#### 심각도 기준: HIGH
**HIGH로 설정한 이유:**
1. **종합적 위험 평가**: 여러 보안 요소의 복합적 위험 분석
2. **전체적 보안 상태**: 개별 검사로는 놓칠 수 있는 전체적 위험 식별
3. **규제 준수**: 포괄적인 보안 감사 요구사항 충족
4. **예방적 조치**: 문제가 심각해지기 전 조기 발견

#### 검사 기준
- **FAIL 조건**: 중요한 보안 위험 (MFA 미설정 + 관리자 권한)
- **WARNING 조건**: 개선 필요 항목 (오래된 키, 비활성 사용자 등)
- **분석 대상**: 모든 IAM 사용자의 종합적 보안 상태

#### 권장 개선 방안
1. **정기적 감사**: 월간 자격 증명 보고서 검토
2. **자동화된 모니터링**: 보안 상태 변화 자동 감지
3. **우선순위 관리**: 위험도에 따른 개선 작업 우선순위 설정
4. **교육 및 훈련**: 사용자 보안 인식 교육

---

### 8. 서비스 제어 정책 (iam-service-control-policy)

#### 검사 목적
- **주요 목적**: 조직 수준의 권한 가드레일 설정
- **중앙 집중 관리**: 여러 계정에 대한 통합 보안 정책

#### 심각도 기준: MEDIUM
**MEDIUM으로 설정한 이유:**
1. **조직 수준 보안**: 개별 계정보다는 조직 전체의 보안 거버넌스
2. **예방적 조치**: 즉각적 위험보다는 장기적 보안 강화
3. **선택적 적용**: 모든 조직에 필수는 아니지만 권장되는 보안 조치
4. **복잡성**: 구현과 관리가 복잡하여 점진적 도입 필요

#### 검사 기준
- **WARNING 조건**: 권장 SCP 정책 미구현
- **분석 대상**: AWS Organizations의 SCP 설정 상태

#### 권장 개선 방안
1. **루트 사용자 제한**: 루트 계정 작업 제한 정책
2. **리전 제한**: 사용하지 않는 리전 접근 차단
3. **조직 탈퇴 방지**: 계정의 조직 탈퇴 방지
4. **암호화 강제**: 특정 서비스의 암호화 필수 설정

## 검사 실행 프로세스

### 데이터 수집
1. **사용자 정보**: list_users, get_user API 호출
2. **정책 정보**: list_policies, get_policy API 호출
3. **자격 증명 보고서**: generate_credential_report API 호출
4. **계정 설정**: get_account_password_policy API 호출

### 분석 알고리즘
1. **시간 기반 분석**: 마지막 사용 시간, 생성 시간 기준 위험도 계산
2. **권한 분석**: 정책 문서 파싱을 통한 과도한 권한 탐지
3. **종합 위험도**: 여러 보안 요소의 복합적 위험도 산출

### 결과 생성
- **우선순위 기반**: 심각도에 따른 처리 순서 제시
- **구체적 가이드**: 각 문제에 대한 상세한 해결 방법 제공
- **진행 상황 추적**: 개선 작업의 진행 상황 모니터링

## 모니터링 및 개선

### 지속적 모니터링
- **실시간 알림**: 중요한 보안 설정 변경 시 즉시 알림
- **정기적 검사**: 주간/월간 정기 보안 검사
- **트렌드 분석**: 시간에 따른 보안 상태 변화 추적

### 성공 지표
- **보안 점수**: 전체적인 IAM 보안 점수 개선
- **위험 요소 감소**: 고위험 항목의 지속적 감소
- **규제 준수**: 보안 표준 준수율 향상

## 검사 항목 요약

### 총 검사 항목: 10개

### HIGH (높음) - 즉시 조치 필요 (6개)
- 액세스 키 교체
- 암호 정책
- MFA 설정
- 루트 계정 보안
- 정책 분석
- 자격 증명 보고서

### MEDIUM (중간) - 계획적 개선 필요 (2개)
- 비활성 사용자 검사
- 서비스 제어 정책

이 문서는 IAM 서비스 어드바이저의 각 검사항목이 왜 필요한지, 어떤 기준으로 심각도를 설정했는지에 대한 상세한 분석을 제공합니다.