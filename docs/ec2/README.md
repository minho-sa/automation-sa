# EC2

### 1. 장기 중지된 인스턴스 검사
- **조건**: 인스턴스가 7일 이상 중지 상태일 때
- **심각도**: 중간
- **메시지**: "장기 중지된 인스턴스의 검토가 필요합니다."
- **문제점**: "EC2 인스턴스가 {stop_duration.days}일 동안 중지된 상태입니다."
- **영향**: "스토리지 비용이 지속적으로 발생하고 있습니다."
- **혜택**: "불필요한 인스턴스 정리를 통한 비용 절감이 가능합니다."
- **권장 조치**:
  - AWS 콘솔에서 EC2 서비스로 이동합니다.
  - 인스턴스를 선택합니다.
  - 필요하지 않은 경우 '인스턴스 종료' 작업을 수행합니다.
  - 필요한 경우 AMI를 생성하여 나중에 복원할 수 있도록 합니다.

### 2. 이전 세대 인스턴스 타입 검사
- **조건**: t2, m4, c4, r4 시리즈 인스턴스 사용 시
- **심각도**: 낮음
- **메시지**: "이전 세대 인스턴스 타입({instance_type})의 업그레이드가 필요합니다."
- **문제점**: "이전 세대 인스턴스 타입({instance_type})을 사용하고 있습니다."
- **영향**: "최신 세대 인스턴스({new_generation}) 대비 성능 및 비용 효율성이 낮은 상태입니다."
- **혜택**: "최신 세대 인스턴스 사용으로 성능 향상 및 비용 효율성 개선이 가능합니다."
- **권장 조치**:
  - 워크로드 패턴을 분석합니다.
  - 인스턴스 타입을 {new_generation}으로 변경합니다.
  - 변경 후 워크로드를 모니터링합니다.

### 3. 예약 인스턴스 추천
- **조건**: 인스턴스가 30일 이상 실행 중일 때
- **심각도**: 중간
- **메시지**: "{runtime.days}일 동안 실행 중인 인스턴스의 예약 인스턴스 전환이 필요합니다."
- **문제점**: "온디맨드 인스턴스가 {runtime.days}일 동안 지속 실행 중입니다."
- **영향**: "온디맨드 요금으로 인한 추가 비용이 발생하고 있습니다."
- **혜택**: "예약 인스턴스 적용으로 최대 72%까지 비용 절감이 가능합니다."
- **권장 조치**:
  - 인스턴스의 사용 패턴을 분석합니다.
  - 적절한 예약 기간과 선결제 옵션을 선택합니다.
  - 예약 인스턴스를 구매합니다.

### 4. 보안 그룹 검사
- **조건**: SSH(22), RDP(3389), FTP(21), Telnet(23), SMB(445) 포트가 전체(0.0.0.0/0) 개방되어 있을 때
- **심각도**: 높음
- **메시지**: "보안 그룹 구성 개선이 필요합니다."
- **문제점**: [보안 그룹 이슈 목록]
- **영향**: "무분별한 접근 허용으로 인한 보안 위험이 있습니다."
- **혜택**: "보안 태세 강화 및 잠재적 위험 감소가 가능합니다."
- **권장 조치**:
  - 전체 개방된 규칙을 필요한 IP 범위로 제한합니다.
  - 위험 포트에 대한 접근을 제한합니다.
  - 불필요한 규칙을 제거합니다.
  - 정기적인 보안 그룹 규칙 검토를 수행합니다.

### 5. CPU 사용률 모니터링
- **조건**: CPU 사용률이 7일 연속 20% 미만이거나 80% 이상일 때
- **심각도**: 
  - 저사용률: 중간
  - 고사용률: 높음
- **메시지**: 
  - 저사용률: "CPU 사용률이 {일수}일 연속 20% 미만으로 유지되고 있습니다."
  - 고사용률: "CPU 사용률이 {일수}일 연속 80% 이상으로 유지되고 있습니다."
- **문제점**: 
  - 저사용률: "지속적으로 낮은 CPU 사용률이 발생하고 있습니다."
  - 고사용률: "지속적으로 높은 CPU 사용률이 발생하고 있습니다."
- **영향**:
  - 저사용률: "과다 프로비저닝으로 인한 불필요한 비용이 발생하고 있습니다."
  - 고사용률: "성능 병목 현상으로 서비스 지연이 발생할 수 있습니다."
- **혜택**:
  - 저사용률: "적절한 크기 조정으로 최대 30-50% 비용 절감이 가능합니다."
  - 고사용률: "적절한 리소스 확장으로 안정적인 서비스 제공이 가능합니다."
- **권장 조치**:
  - 저사용률:
    - CloudWatch 메트릭을 검토합니다.
    - 인스턴스 다운사이징을 검토합니다.
    - 예약 인스턴스 전환을 검토합니다.
    - 자동 중지/시작 스케줄링을 고려합니다.
  - 고사용률:
    - CloudWatch 메트릭을 상세 분석합니다.
    - 인스턴스 업스케일링을 검토합니다.
    - Auto Scaling 구성을 검토합니다.
    - 워크로드 분산 방안을 검토합니다.

### 6. EBS 볼륨 최적화
- **조건**: 
  - 미사용 EBS 볼륨이 존재할 때
  - IOPS가 과다 설정된 경우(10,000 IOPS 초과)
  - gp2 볼륨을 사용 중일 때
- **심각도**: 중간
- **메시지**: "EBS 볼륨 최적화가 필요합니다."
- **문제점**: [발견된 이슈 목록]
- **영향**: "불필요한 스토리지 비용 발생"
- **혜택**: "스토리지 비용 최적화 및 성능 개선"
- **권장 조치**:
  - 미사용 볼륨 식별 및 제거
  - 볼륨 크기 및 IOPS 최적화
  - gp2에서 gp3로 마이그레이션 검토
  - 주기적인 스냅샷 정책 검토

### 7. 태그 관리
- **조건**: Name, Environment, Owner, Project 태그 중 하나라도 누락되었을 때
- **심각도**: 낮음
- **메시지**: "필수 태그 보완이 필요합니다."
- **문제점**: "다음 필수 태그가 누락되어 있습니다: {missing_tags}"
- **영향**: "리소스 관리 및 비용 추적이 어려운 상태입니다."
- **혜택**: "체계적인 리소스 관리 및 비용 추적이 가능합니다."
- **권장 조치**:
  - 필수 태그를 정의하고 적용합니다.
  - 태그 기반 비용 할당을 설정합니다.
  - 자동 태깅 규칙을 구성합니다.
  - 정기적인 태그 컴플라이언스를 검토합니다.

### 8. 네트워크 성능 모니터링
- **조건**: 네트워크 입출력이 100MB/s 이상일 때
- **심각도**: 높음
- **메시지**: "네트워크 성능 개선이 필요합니다."
- **문제점**: [발견된 네트워크 이슈 목록]
- **영향**: "애플리케이션 성능 저하 및 사용자 경험이 악화되고 있습니다."
- **혜택**: "네트워크 최적화로 성능 및 안정성 개선이 가능합니다."
- **권장 조치**:
  - 네트워크 성능 메트릭을 분석합니다.
  - ENI 설정을 최적화합니다.
  - 네트워크 ACL 및 라우팅 테이블을 검토합니다.
  - 향상된 네트워킹 활성화를 검토합니다.

### 9. 백업 정책 검사
- **조건**: 정기적인 백업 정책이 설정되어 있지 않을 때
- **심각도**: 높음
- **메시지**: "백업 정책 구성이 필요합니다."
- **문제점**: "정기적인 백업 정책이 설정되어 있지 않습니다."
- **영향**: "데이터 손실 위험에 노출되어 있습니다."
- **혜택**: "정기적인 백업으로 데이터 보호 및 신속한 복구가 가능합니다."
- **권장 조치**:
  - AWS Backup 정책을 설정합니다.
  - 스냅샷 생성을 자동화합니다.
  - 백업 보존 기간을 설정합니다.
  - 복구 시점 목표(RPO)를 설정하고 검토합니다.
